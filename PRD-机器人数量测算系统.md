# 机器人数量测算系统 PRD

## 产品概述

**产品名称**: 机器人数量测算系统 (Robot Calculator System)
**版本**: 1.4.1
**发布日期**: 2026-01-31

### 产品简介
基于《机器人数量测算表》开发的智能叉车机器人效率测算工具，帮助用户快速计算搬运场景所需的机器人数量。

### 目标用户
- 仓储物流规划人员
- 机器人部署工程师
- 项目方案设计师

---

## 功能描述

### 1. 搬运流程输入模块（第一步）

#### 功能描述
支持用户输入多条搬运流程，每条流程包含完整的业务参数。

#### 输入字段
| 字段名 | 类型 | 默认值 | 说明 |
|-------|------|-------|------|
| 搬运流程 | 文本 | - | 起点→终点 |
| 搬运货物 | 文本 | - | 货物类型描述 |
| 搬运节拍 | 数字 | 12 | 托/趟/h |
| 取放货次数 | 数字 | 2 | 次 |
| 举升高度 | 数字 | 1 | m |
| 栈板识别 | 开关 | 关 | 是否启用 |
| 搬运距离 | 数字 | 80 | m(往返) |
| 平均速度 | 数字 | 0.8 | m/s |
| 转弯个数 | 数字 | 4 | 个 |
| 设备对接 | 数字 | 0 | 次 |
| 交管耗时 | 数字 | 15 | 秒 |

#### 用户故事
- 作为规划人员，我希望能添加多条搬运流程，以便计算整个仓库的机器人需求。
- 作为规划人员，我希望能删除不需要的流程，以便灵活调整方案。

---

### 2. 车型选择模块（第二步）

#### 功能描述
提供26款机器人型号的可视化卡片展示，采用横向滚动布局（苹果/Notion风格UX）。支持型号搜索和参数编辑功能。

#### 支持车型（26款）
| 类型 | 型号 | 定格负荷 | 速度(空/满载) | 举升高度 | 充放比 |
|------|------|---------|-------------|---------|-------|
| 平衡重式叉车 | APe15 | 1,500kg | 2.0/1.5 m/s | 205mm | 1:3 |
| 平衡重式叉车 | APx20 | 2,000kg | 2.0/1.5 m/s | 190mm | 1:2 |
| 平衡重式叉车 | AP20 | 2,000kg | 2.0/1.5 m/s | 210mm | 1:2 |
| 平衡重式叉车 | AP30 | 3,000kg | 2.0/1.5 m/s | 210mm | 1:2 |
| 平衡重式叉车 | AP60 | 6,000kg | 1.5/1.0 m/s | 270mm | 1:2 |
| 料箱搬运车 | AL05 | 500kg | 1.0/0.8 m/s | 600mm | 1:2 |
| 堆高车 | AM15 | 1,500kg | 1.5/1.0 m/s | 1,600mm | 1:4 |
| 堆高车 | AS15 | 1,500kg | 1.5/1.0 m/s | 3,000mm | 1:3 |
| 堆高车 | AS20 | 2,000kg | 1.5/1.0 m/s | 3,000mm | 1:3 |
| 堆高车 | AS30 | 3,000kg | 1.5/1.0 m/s | 1,200mm | 1:3 |
| 窄巷道堆高车 | ASK15 | 1,500kg | 1.5/1.0 m/s | 3,000mm | 1:3 |
| 窄巷道堆高车 | ASK20 | 2,000kg | 1.5/1.0 m/s | 1,600mm | 1:3 |
| 窄巷道堆高车 | ASK30 | 3,000kg | 1.5/1.0 m/s | 5,000mm | 1:3 |
| 电动叉车 | AE10 | 1,000kg | 1.5/1.0 m/s | 1,600mm | 1:3 |
| 电动叉车 | AE15 | 1,500kg | 2.0/1.5 m/s | 3,000mm | 1:3 |
| 电动叉车 | AE20 | 2,000kg | 2.0/1.5 m/s | 1,600mm | 1:3 |
| 电动叉车 | AE30 | 3,000kg | 2.5/1.7 m/s | 1,500mm | 1:3 |
| 前移式叉车 | AR10 | 1,000kg | 1.5/1.0 m/s | 1,600mm | 1:4 |
| 前移式叉车 | AR15 | 1,500kg | 2.0/1.5 m/s | 3,000mm | 1:4 |
| 前移式叉车 | AR20 | 2,000kg | 2.0/1.5 m/s | 6,000mm | 1:4 |
| 前移式叉车 | ARK15 | 1,500kg | 2.0/1.5 m/s | 3,000mm | 1:4 |
| 前移式叉车 | ARV15 | 1,500kg | 2.0/1.5 m/s | 6,000mm | 1:4 |
| 托盘搬运车 | TP30 | 300kg | 1.5/1.0 m/s | 60mm | 1:2.5 |
| 托盘搬运车 | TP60 | 600kg | 2.0/1.5 m/s | 60mm | 1:2.5 |
| 托盘搬运车 | TP100 | 1,000kg | 2.0/1.5 m/s | 60mm | 1:2.5 |
| 托盘搬运车 | TP150 | 1,500kg | 1.5/1.0 m/s | 60mm | 1:2.5 |

#### 展示特性
- **横向滚动布局**: 单行展示所有产品卡片，支持平滑横向滚动
- **滚动指示器**: 左右箭头按钮，悬停显示，方便导航
- **边缘渐变**: 滚动时边缘显示渐变效果提示可滚动方向
- **搜索功能**: 支持按型号名称或类型搜索，实时过滤显示

#### 参数编辑功能
点击卡片上的编辑按钮，可修改以下参数（分组显示）：

**基本信息**
- 型号名称、类型描述、额定负载 (kg)、举升高度 (mm)

**门架与货叉**
- 门架最大提升高度 (mm)、标准货叉尺寸 l/e/s (mm)、货叉最低位离地高度 (mm)、货叉标准外间距 (mm)

**性能参数**
- 到位精度、空载速度 (m/s)、满载速度 (m/s)、爬坡能力 (空载/满载)、巷道空间 (mm)、外形尺寸 LxWxH (mm)、自重 (kg)

**电池与充电**
- 标配容量 (Ah)、续航时间 (h)、充电时间 (h)、充电桩型号、充放比 (1:X)

**数据持久化**: 修改后的参数会保存到浏览器 localStorage，刷新页面后保留。

#### 用户故事
- 作为规划人员，我希望能直观看到各车型的关键参数，以便选择最适合的机器人类型。
- 作为规划人员，我希望能通过搜索快速找到需要的机器人型号。
- 作为规划人员，我希望能修改机器人参数，以便适应实际项目中的特殊配置。
- 作为规划人员，我希望修改后的参数能够保存，下次打开时不需要重新设置。

---

### 3. 效率测算模块（第三步）

#### 功能描述
根据用户输入自动计算各项耗时指标和机器人需求数量。支持公式参数自定义编辑。

#### 计算公式
```
取放耗时 = 取放次数 × [取放货耗时参数]
举升耗时 = (举升高度 - 1m) / 举升速度 × 2 × 取放次数 (仅当高度>1m)
工步通讯 = [工步通讯参数] × 取放次数
栈板识别 = [栈板识别参数] (如启用)
运行耗时 = 搬运距离 / 平均速度
转弯耗时 = 转弯个数 × [转弯耗时参数]
对接耗时 = 设备对接次数 × [设备对接参数]
交管耗时 = 用户输入值（默认15秒）
作业时间 = 以上所有耗时之和
搬运能力 = 3600 / 作业时间
理论数量 = 搬运节拍 / 搬运能力

# 工作时充电模式
充电数量 = 理论数量 × (1/充放比)
建议投入 = 向上取整(理论数量 + 充电数量)
利用率 = 理论数量 / (建议投入 - 充电数量) × 100%

# 非工作时充电模式（标准模式）
充电数量 = 0
建议投入 = 向上取整(理论数量)
利用率 = 理论数量 / 建议投入 × 100%

# 利用率超过90%时
当自动计算的利用率 > 90% 时，允许用户手动修改"建议投入"数值，利用率会根据新值重新计算
```

#### 工作时充电功能
- 通过开关切换充电模式
- 开启时：机器人在工作过程中轮换充电，需要更多机器人投入
- 关闭时：集中充电模式，系统自动确保利用率不超过90%

#### 公式参数编辑功能
点击"第三步"标题旁的编辑按钮，可修改以下公式参数：

| 参数名 | 默认值 | 说明 |
|-------|-------|------|
| 取放货耗时 | 20秒/次 | 单次取/放货动作时间 |
| 工步通讯 | 5秒/次 | 机器人与RDS系统通讯时间 |
| 栈板识别 | 15秒 | 栈板识别扫描时间 |
| 转弯耗时 | 5秒/次 | 单个转弯消耗时间 |
| 设备对接 | 10秒/次 | 自动门/输送线/电梯对接时间 |

**数据持久化**: 修改后的公式参数会保存到浏览器 localStorage，刷新页面后保留。

#### 用户故事
- 作为规划人员，我希望看到每条流程的详细耗时分解，以便分析瓶颈。
- 作为规划人员，我希望结果能实时更新，以便快速调整参数。
- 作为规划人员，我希望能修改公式中的常数参数，以便适应不同项目的实际情况。

---

### 4. 结果展示模块（第三步）

#### 功能描述
以卡片和表格形式展示计算结果。

#### 展示内容
- **汇总卡片**
  - 建议投入机器人数量
  - 总搬运能力
  - 充电数量

- **详细表格**
  - 各流程的所有计算指标
  - 汇总行显示合计数据

#### 用户故事
- 作为规划人员，我希望能快速看到最终需要多少机器人。
- 作为规划人员，我希望能调整利用率来查看不同场景下的需求。

---

## 非功能需求

### 性能要求
- 页面加载时间 < 2秒
- 计算响应时间 < 100ms

### 兼容性
- 支持 Chrome、Firefox、Safari、Edge 等主流浏览器
- 支持移动端自适应布局

### 易用性
- 纯中文界面
- 直观的可视化设计
- 无需安装，直接浏览器打开使用
- 机器人参数可自定义编辑
- 计算公式参数可自定义编辑
- 参数设置自动保存到浏览器本地存储

---

## 设计规范

### 颜色系统
- 主色: #4E7DF7 (蓝色)
- 成功色: #10B981 (绿色)
- 警告色: #F59E0B (橙色)
- 错误色: #EF4444 (红色)
- 背景色: #F3F4F6 (浅灰)

### 设计参考
- 基于 Robot List 文件夹中的 TP、APx、AR、APe 系列 HTML 模板设计风格

---

## 版本历史

| 版本 | 日期 | 变更内容 |
|-----|------|---------|
| 1.4.1 | 2026-01-31 | 产品参数完整数据（16个字段）；编辑模态框分组显示扩展 |
| 1.4.0 | 2026-01-31 | 产品库升级为26个型号；横向滚动UI设计；搜索功能；参数修改持久化 |
| 1.3.5 | 2026-01-31 | 更新计算公式：充电数量基于理论数量计算，建议投入=Roundup(理论数量+充电数量) |
| 1.3.4 | 2026-01-31 | 充电数量显示格式优化，去掉多余尾随零 |
| 1.3.3 | 2026-01-31 | 交管耗时改为用户手动输入（默认15秒），移除公式自动计算 |
| 1.3.2 | 2026-01-31 | 建议投入数量可编辑功能：利用率超过90%时允许手动输入 |
| 1.3.1 | 2026-01-31 | 充电数量逻辑修正：非工作时充电模式下固定为0 |
| 1.3.0 | 2026-01-31 | 新增"工作时充电"模式切换；利用率改为自动计算并确保不超过90%；优化建议投入和充电数量计算逻辑 |
| 1.2.0 | 2026-01-31 | 新增公式参数编辑功能，支持自定义各项耗时计算参数，参数持久化到 localStorage |
| 1.1.0 | 2026-01-31 | 界面改为纯中文；调整步骤顺序；删除MP系列，增加AR和APe系列；新增参数编辑功能 |
| 1.0.0 | 2026-01-31 | 初始版本发布 |

---

## 附录

### 测试用例

#### TC01: 车型选择
1. 打开页面
2. 点击 TP 系列卡片
3. 预期: TP 卡片显示选中状态

#### TC02: 添加流程
1. 点击"添加流程"按钮
2. 预期: 表格新增一行

#### TC03: 计算验证
1. 选择 TP 系列
2. 输入: 搬运节拍=12, 取放次数=2, 距离=80m, 速度=0.8m/s
3. 预期: 运行耗时=100s, 搬运能力约20.6托/h

#### TC04: 多流程汇总
1. 添加2条流程
2. 预期: 汇总行显示两条流程的合计数据

#### TC05: 公式参数编辑
1. 点击"第三步"标题旁的编辑按钮
2. 修改"取放货耗时"为30秒
3. 点击保存
4. 预期: 结果表格中的取放耗时数值按新参数重新计算
5. 刷新页面
6. 预期: 修改后的参数值保留

#### TC06: 工作时充电模式
1. 选择 TP 系列（充放比 1:2.5）
2. 添加流程，确保理论数量 > 0
3. 开启"工作时充电"开关
4. 预期: 建议投入 = ceil(理论数量 × 1.4)
5. 预期: 利用率显示计算值
6. 关闭"工作时充电"开关
7. 预期: 利用率 ≤ 90%
